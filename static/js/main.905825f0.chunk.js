(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{18:function(e,n,t){},19:function(e,n,t){},23:function(e,n,t){"use strict";t.r(n);var r,o,c=t(0),a=t.n(c),i=t(10),u=t.n(i),l=(t(18),t(19),t(2)),s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Array.from(Array(20+e),(function(){return Array(12+e).fill([0,"clear"])}))},f=function(e,n,t){for(var r=t.x,o=t.y,c=0;c<e.shape.length;c+=1)for(var a=0;a<e.shape[c].length;a+=1)if(0!==e.shape[c][a]&&(!n[c+e.pos.y+o]||!n[c+e.pos.y+o][a+e.pos.x+r]||"clear"!==n[c+e.pos.y+o][a+e.pos.x+r][1]))return!0;return!1},d=t(3),p=t(4),b=p.a.div(r||(r=Object(d.a)(["\n  width: 100vw;\n  height: 100vh;\n  background-size: cover;\n  overflow: hidden;\n"]))),h=p.a.div(o||(o=Object(d.a)(["\n  display: flex;\n  align-items: flex-start;\n  padding: 40px;\n  margin: 0 auto;\n  max-width: 900px;\n  \n  aside {\n    width: 100%;\n    max-width: 200px;\n    display: block;\n    padding: 0 20px;\n  }\n"])));var x,j,g,O,v=t(5),m={0:{shape:[[0]],color:"0, 0, 0"},I:{shape:[[0,"I",0,0],[0,"I",0,0],[0,"I",0,0],[0,"I",0,0]],color:"80, 227, 230"},J:{shape:[[0,"J",0],[0,"J",0],["J","J",0]],color:"36, 95, 223"},L:{shape:[[0,"L",0],[0,"L",0],[0,"L","L"]],color:"223, 173, 36"},O:{shape:[["O","O"],["O","O"]],color:"223, 217, 36"},S:{shape:[[0,"S","S"],["S","S",0],[0,0,0]],color:"48, 211, 256"},T:{shape:[[0,0,0],["T","T","T"],[0,"T",0]],color:"132, 61, 198"},Z:{shape:[["Z","Z",0],[0,"Z","Z"],[0,0,0]],color:"7, 78, 78"}},y=Object(v.a)({U:{shape:[[0,0,0,0],["U",0,0,"U"],["U",0,0,"U"],["U","U","U","U"]],color:"80, 227, 230"},C:{shape:[[0,0,0],["C",0,"C"],["C","C","C"]],color:"80, 227, 230"},c:{shape:[["c",0],["c","c"]],color:"80, 227, 230"}},m),S=function(){var e="IJLOSTZ",n=e[Math.floor(Math.random()*e.length)];return m[n]},w=function(){var e="IJLOSTZUCc",n=e[Math.floor(Math.random()*e.length)];return y[n]},C=function(e,n,t,r){var o=Object(c.useState)(s(t)),a=Object(l.a)(o,2),i=a[0],u=a[1],f=Object(c.useState)(0),d=Object(l.a)(f,2),p=d[0],b=d[1];return Object(c.useEffect)((function(){b(0);var o=function(e){return e.reduce((function(n,t){return-1===t.findIndex((function(e){return 0===e[0]}))?(b((function(e){return e+1})),n.unshift(new Array(e[0].length).fill([0,"clear"])),n):(n.push(t),n)}),[])};u((function(c){return function(c){var a=c.map((function(e){return e.map((function(e){return"clear"===e[1]?[0,"clear"]:e}))}));return e.shape.forEach((function(n,t){n.forEach((function(n,r){0!==n&&(a[t+e.pos.y][r+e.pos.x]=[n,"".concat(e.collided?"merged":"clear")])}))})),e.collided?t<1?(n(),o(a)):(r(),o(a)):a}(c)}))}),[e.collided,e.pos.x,e.pos.y,e.shape,n,r,t]),[i,u,p]},I=p.a.div(x||(x=Object(d.a)(["\n  width: auto;\n  background: rgba(",", 0.8);\n  border: ",";\n  border-bottom-color: rgba(",", 0.1);\n  border-top-color: rgba(",", 1);\n  border-left-color: rgba(",", 0.3);\n  border-right-color: rgba(",", 1);\n"])),(function(e){return e.color}),(function(e){return 0===e.type?"0px solid":"4px solid"}),(function(e){return e.color}),(function(e){return e.color}),(function(e){return e.color}),(function(e){return e.color})),k=t(1),J=function(e){var n=e.type;return Object(k.jsx)(I,{type:n,color:y[n].color})},U=a.a.memo(J),L=p.a.div(j||(j=Object(d.a)(["\n  display: grid;\n  grid-template-rows: repeat(\n    ",",\n    calc(25vw / ",")\n  );\n  grid-template-columns: repeat(",", 1fr);\n  grid-gap: 1px;\n  border: 2px solid #333;\n  width: 100%;\n  max-width: 25vw;\n  background: #111;\n"])),(function(e){return e.height}),(function(e){return e.width}),(function(e){return e.width})),T=function(e){var n=e.stage;return Object(k.jsx)(L,{width:n[0].length,height:n.length,children:n.map((function(e){return e.map((function(e,n){return Object(k.jsx)(U,{type:e[0]},n)}))}))})},A=a.a.memo(T),E=p.a.div(g||(g=Object(d.a)(["\n  box-sizing: border-box;\n  display: flex;\n  align-items: center;\n  margin: 0 0 20px 0;\n  padding: 20px;\n  border: 4px solid #333;\n  min-height: 30px;\n  width: 100%;\n  border-radius: 20px;\n  color: ",";\n  background: #000;\n  font-family: Pixel, Arial, Helvetica, sans-serif;\n  font-size: 0.8rem;\n"])),(function(e){return e.gameOver?"red":"#999"})),Z=function(e){var n=e.gameOver,t=e.text;return Object(k.jsx)(E,{gameOver:n,children:t})},z=p.a.button(O||(O=Object(d.a)(["\n  box-sizing: border-box;\n  margin: 0 0 20px 0;\n  padding: 20px;\n  min-height: 30px;\n  width: 100%;\n  border-radius: 20px;\n  border: none;\n  color: white;\n  background: #333;\n  font-family: Pixel, Arial, Helvetica, sans-serif;\n  font-size: 1rem;\n  outline: none;\n  cursor: pointer;\n"]))),F=function(e){var n=e.callback;return Object(k.jsx)(z,{onClick:n,children:"Start Game"})},H=1,M=0,N=function(){var e=Object(c.useState)(null),n=Object(l.a)(e,2),t=n[0],r=n[1],o=Object(c.useState)(!1),a=Object(l.a)(o,2),i=a[0],u=a[1],d=function(){var e=Object(c.useState)({pos:{x:0,y:0},shape:y[0].shape,collided:!1}),n=Object(l.a)(e,2),t=n[0],r=n[1];function o(e,n){var t=e.map((function(n,t){return e.map((function(e){return e[t]}))}));return n>0?t.map((function(e){return e.reverse()})):t.reverse()}var a=Object(c.useCallback)((function(){r({pos:{x:4,y:0},shape:S().shape,collided:!1})}),[]),i=Object(c.useCallback)((function(){r({pos:{x:4,y:0},shape:w().shape,collided:!1})}),[]);return[t,function(e){var n=e.x,t=e.y,o=e.collided;r((function(e){return Object(v.a)(Object(v.a)({},e),{},{pos:{x:e.pos.x+=n,y:e.pos.y+=t},collided:o})}))},a,function(e,n){var c=JSON.parse(JSON.stringify(t));c.shape=o(c.shape,n);for(var a=c.pos.x,i=1;f(c,e,{x:0,y:0});)if(c.pos.x+=i,(i=-(i+(i>0?1:-1)))>c.shape[0].length)return o(c.shape,-n),void(c.pos.x=a);r(c)},i]}(),p=Object(l.a)(d,5),x=p[0],j=p[1],g=p[2],O=p[3],m=p[4],I=C(x,g,M,m),J=Object(l.a)(I,3),U=J[0],L=J[1],T=function(e){var n=Object(c.useState)(0),t=Object(l.a)(n,2),r=t[0],o=t[1],a=Object(c.useState)(0),i=Object(l.a)(a,2),u=i[0],s=i[1],f=Object(c.useState)(0),d=Object(l.a)(f,2),p=d[0],b=d[1],h=[40,100,300,1200],x=Object(c.useCallback)((function(){e>0&&(o((function(n){return n+h[e-1]*(p+1)})),s((function(n){return n+e})))}),[p,h,e]);return Object(c.useEffect)((function(){x()}),[x,e,r]),[r,o,u,s,p,b]}(J[2]),E=Object(l.a)(T,6),z=E[0],N=E[1],P=E[2],B=E[3],D=E[4],G=E[5],K=function(e){f(x,U,{x:e,y:0})||j({x:e,y:0})},R=function(e){P/5>=H&&P/5<H+5&&(M++,L(s(M)),H++),!0===e&&r(1/0),f(x,U,{x:0,y:1})?(x.pos.y<1&&(r(null),u(!0),z>localStorage.getItem("highScore")&&(console.log("New High Score!"),localStorage.setItem("highScore",z))),j({x:0,y:0,collided:!0}),r(1e3/(P+1)+300)):j({x:0,y:1,collided:!1})},q=function(e){r(null),e&&R(!0),R(!1)};!function(e,n){var t=Object(c.useRef)();Object(c.useEffect)((function(){t.current=e}),[e]),Object(c.useEffect)((function(){if(null!==n){var e=setInterval((function(){t.current()}),n);return function(){clearInterval(e)}}}),[n])}((function(){R()}),t);return Object(k.jsx)(b,{role:"button",tabIndex:"0",onKeyDown:function(e){return function(e){var n=e.keyCode;i||(37===n?K(-1):39===n?K(1):40===n?q():38===n?O(U,1):191===n&&q(!0))}(e)},onKeyUp:function(e){var n=e.keyCode;i||40===n&&r(1e3/(D+1))},children:Object(k.jsxs)(h,{children:[Object(k.jsx)(A,{stage:U}),Object(k.jsxs)("aside",{children:[i?Object(k.jsx)(Z,{gameOver:i,text:"Game Over"}):Object(k.jsxs)("div",{children:[Object(k.jsx)(Z,{text:"High Score: ".concat(localStorage.getItem("highScore")?localStorage.getItem("highScore"):0)}),Object(k.jsx)(Z,{text:"Score: ".concat(z)}),Object(k.jsx)(Z,{text:"Rows Cleared: ".concat(P)})]}),Object(k.jsx)(F,{callback:function(){L(s()),r(1e3),g(),N(0),G(0),B(0),u(!1)}})]})]})})},P=function(){return Object(k.jsx)("div",{className:"App",children:Object(k.jsx)(N,{})})},B=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,24)).then((function(n){var t=n.getCLS,r=n.getFID,o=n.getFCP,c=n.getLCP,a=n.getTTFB;t(e),r(e),o(e),c(e),a(e)}))};u.a.render(Object(k.jsx)(P,{}),document.getElementById("root")),B()}},[[23,1,2]]]);
//# sourceMappingURL=main.905825f0.chunk.js.map